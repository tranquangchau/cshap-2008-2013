var webengage=webengage||{};var _weq=_weq||{};webengage.eLog=function(h,c,g,f){if(h instanceof Error){g=h.stack||h.description;g=(g.length>900?g.substring(0,900):g);f=h.message||g.substring(0,50);c="exception"}if(c){var b="{'version':'"+webengage.getWidgetVersion()+"','text':'"+g+"'}";var d=(c==="error"?"//t1.webengage.com/1.jpg":"//t.webengage.com/1.jpg");var a=new Image();a.src=d+"?event="+encodeURIComponent(f)+"&category="+_weq["webengage.licenseCode"]+"&type="+c+"&data="+encodeURIComponent(b)+"&ts="+(new Date()).getTime()}};webengage.withELog=function(c,a,b){if(typeof c==="function"){try{if(!(a instanceof Array)){a=[]}return c.apply(undefined,a)}catch(d){webengage.eLog(d);if(!b){throw d}}}else{throw new Error("WithELog : first argument not a function")}};webengage.setTimeout=function(a,b){return setTimeout(function(){webengage.withELog(a)},b)};webengage.setInterval=function(b,a){return setInterval(function(){webengage.withELog(b)},a)};webengage.setTimeout(function(){(function(d,a,f,c,e){var b=function(){var h=null,r=function(z,y,w){var x=(typeof(w)==="boolean"?w:true);for(var v in y){if(z[v]===e||x){z[v]=y[v]}}return z},t={};r(c,{util:{copy:function(x,w,v){return r(x,w,v)},loadScript:function(y,z,v,A){var x=a.createElement("script");x.type="text/javascript";x.charset="UTF-8";x.async=true;x.src=y;x.callBack=z;x.callBackArgs=v||[];x.errorCallBack=A;this.appendChild(x);if(c.BrowserDetect.ie()){if(typeof z==="function"){var w=function(){if(x.readyState=="loaded"||x.readyState=="complete"){c.withELog(z,v)}};x.defer=true;x.onreadystatechange=w}}else{if(x.addEventListener){if(typeof z==="function"){x.addEventListener("load",function(B){c.withELog(z,v)},false)}x.addEventListener("error",function(B){if(c.getWidgetVersion()!=="3.0"){c.eLog(null,"error","could not load - "+y,"script loading error")}if(typeof A==="function"){c.withELog(A,[B])}},true)}else{if(typeof z==="function"){x.attachEvent("onload",function(B){c.withELog(z,v)})}x.attachEvent("onerror",function(B){if(c.getWidgetVersion()!=="3.0"){c.eLog(null,"error","could not load - "+y,"script loading error")}if(typeof A==="function"){c.withELog(A,[B])}})}}},createObj:function(w){var x=c,v=w?w.split("."):[];for(var y=0;y<v.length;y++){var A=v[y],z=x[A];if(!z){z={};x[A]=z}x=z}return x},extend:function(v,w){return c.util.copy((typeof v=="string"?c.util.createObj(v):v),w)},isJqueryPresent:function(){return(d.jQuery!==e&&parseFloat("."+d.jQuery().jquery.replace(/\./g,""))>=0.13)},applyCss:function(x,w){try{for(var v in w){if(typeof w[v]=="function"){x.style[v]=w[v]()}else{x.style[v]=w[v]}}}catch(y){}return x},inArray:function(v,x){for(var w=0;w<v.length;w++){if(v[w]==x){return true}}return false},getMaxZIndex:function(){if(this.maxZIndex===e){this.maxZIndex=16776271}return this.maxZIndex++},alignCenter:function(y,x,w){var v=(w=="left")?"right":"left";y.style.top=((parseInt(c.util.getElementHeight(x),10)-parseInt(c.util.getElementHeight(y),10))/2-(/Firefox/i.test(navigator.userAgent)?7:0))+"px";y.style[v]=(parseInt(c.util.getElementWidth(x),10)-parseInt(c.util.getElementWidth(y),10))/2+10+"px"},getElementWidth:function(v){if(v.clip!==e){return v.clip.width}else{if(v.style.pixelWidth){return v.style.pixelWidth}else{return v.offsetWidth}}},getElementHeight:function(v){if(v.clip!==e){return v.clip.height}else{if(v.style.pixelHeight){return v.style.pixelHeight}else{return v.offsetHeight}}},isSupportsLocalStorage:function(x){try{var v=(typeof(Storage)!=="undefined"&&"localStorage" in d&&d.localStorage!==null);if(!x&&v){d.localStorage["_we_dm_ios_sup_f_"]="true";d.localStorage.removeItem("_we_dm_ios_sup_f_")}return v}catch(w){return false}},getWindowHeight:function(){return"innerHeight" in d?d.innerHeight:a.documentElement.offsetHeight},getWindowWidth:function(){return"innerWidth" in d?d.innerWidth:a.documentElement.offsetWidth},getInitParamValue:function(v,z,w,y){var x=w!==e?w:null;if(v&&v[z]){var A=v[z];if(y){if(c.util.inArray(y,A)){x=A}}else{x=A}}return x},getInitParamValueAsArray:function(v,B,y,A){var z=c.util.getInitParamValue(v,B,y);if(z&&typeof(z)!="object"){z=z.split(/\s*,\s*/)}if(A&&typeof(A)=="object"){var w=[];for(var x=0;x<z.length;x++){if(c.util.inArray(A,z[x])){w[w.length]=z[x]}}z=w}return z},setCookie:function(w,C,x,E,z,v,y){if(c.util.isSupportsLocalStorage()&&!y){try{d.localStorage[w]=C;return"ls"}catch(A){d.localStorage.removeItem(w);return c.util.setCookie(w,C,x,E,z,v,true)}}else{if(c.util.isSupportsLocalStorage(true)&&!y){d.localStorage.removeItem(w)}var B=new Date();B.setTime(B.getTime());if(x){x=x*1000*60*60*24}var D=new Date(B.getTime()+(x));a.cookie=w+"="+encodeURIComponent(C)+((x)?";expires="+D.toGMTString():"")+((E)?";path="+E:"")+((z)?";domain="+z:"")+((v)?";secure":"");return"ck"}},getCookie:function(v,x){if(c.util.isSupportsLocalStorage(true)&&!x){return(d.localStorage[v]?d.localStorage[v]:c.util.getCookie(v,true))}else{var B=a.cookie.split(";");var w="";var z="";var A="";var y=false;for(i=0;i<B.length;i++){w=B[i].split("=");z=w[0].replace(/^\s+|\s+$/g,"");if(z==v){y=true;if(w.length>1){A=decodeURIComponent(w[1].replace(/^\s+|\s+$/g,""))}return A===null?"":A}w=null;z=""}if(!y){return null}}},getCurrentTime:function(w){var z=new Date();var x=z.getTime();if(w!==e){var y=z.getTimezoneOffset()*60000;var v=x+y;x=v+(1000*w)}return x},setWebengageCookie:function(w){var z=(function(){var A=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return((new Date().getTime())+A()+A()+A()+A())})();var y=w||{};var x={time:(new Date()).getTime(),luid:z};y=c.util.copy(y,x,false);var v=c.util.stringify(y);t._we_wk_ls_=y;c.util.setCookie("_we_wk_ls_",v,99999,"/","","");if(this.firstTimeUser===e){this.firstTimeUser=true}},getWebengageCookie:function(){var v=c.util.getCookie("_we_wk_ls_")||t._we_wk_ls_;if(v){var v=c.util.getCookie("_we_wk_ls_");if(c.util.isSupportsLocalStorage()&&c.util.getCookie("_we_wk_ls_",true)){c.util.setCookie("_we_wk_ls_",v,-1,"/","","",true);c.util.setCookie("_we_wk_ls_",v,99999,"/","","")}t._we_wk_ls_=new Function("return "+v)()||null}else{c.util.setWebengageCookie()}return t._we_wk_ls_},setSessionCookie:function(y){var w={referrer:a.referrer,country:c.GEO.country(),region:c.GEO.region(),city:c.GEO.city(),ip:c.GEO.ip(),tsD:(c.GEO.serverTimeStamp()&&!isNaN(c.GEO.serverTimeStamp())?((new Date()).getTime()-parseInt(c.GEO.serverTimeStamp(),10)):0),isFirstTime:c.util.isFirstTimeUser(),sst:(new Date()).getTime(),pvc:1,suid:(new Date().getTime())};var x=y||{};x=c.util.copy(x,w,false);var z=c.util.stringify(x);t._we_wk_ss_=x;var v=c.util.setCookie("_we_wk_ss_",z,"","/","","");if(c.util.isSupportsLocalStorage()){if(v==="ls"){c.util.setCookie("_we_wk_ss_lsf_",true,"","/","","",true)}else{c.util.setCookie("_we_wk_ss_lsf_",false,"","/","","",true)}}return x},getSessionCookie:function(){var y=c.util.getCookie("_we_wk_ss_")||c.util.getCookie("_we_wk_ss_",true)||t._we_wk_ss_;if(y){try{if(c.util.isSupportsLocalStorage()){var x=c.util.getCookie("_we_wk_ss_lsf_",true);if(!x||x==="false"){var v=c.util.getCookie("_we_wk_ss_",true);if(v){c.util.setCookie("_we_wk_ss_",y,-1,"/","","",true);c.util.setSessionCookie(v)}else{throw new Error()}}}t._we_wk_ss_=(new Function("return "+y)())||null}catch(w){t._we_wk_ss_=c.util.setSessionCookie()}}else{t._we_wk_ss_=c.util.setSessionCookie()}return t._we_wk_ss_},updateSessionCookie:function(w){var v=c.util.getSessionCookie();if(v){c.util.copy(v,(w||{}));c.util.setSessionCookie(v)}else{v=c.util.setSessionCookie()}return v},updateSessionCookieGeoData:function(){var v={country:c.GEO.country(),region:c.GEO.region(),city:c.GEO.city(),ip:c.GEO.ip(),tsD:(c.GEO.serverTimeStamp()&&!isNaN(c.GEO.serverTimeStamp())?((new Date()).getTime()-parseInt(c.GEO.serverTimeStamp(),10)):0)};c.util.updateSessionCookie(v)},getClientPageUrl:function(){return d.location.href},getClientPageHost:function(){return d.location.host},escapeScopeChars:function(v){return(v+"").replace(/([,#[\]\\])/g,"$1")},escapeForRegExp:function(v){return(v+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},isFirstTimeUser:function(){return(this.firstTimeUser!==e)?this.firstTimeUser:false},escapeNewLine:function(v){return v.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")},stringify:function(B){if(typeof JSON!=="undefined"&&typeof JSON.stringify==="function"){return JSON.stringify(B)}else{var y=typeof(B);if(y!="object"||B===null){if(y=="string"){B='"'+c.util.escapeNewLine(B)+'"'}return String(B)}else{var C,A,x=[],v=(B&&B.constructor==Array),z=(B&&B instanceof Date);if(v){for(var w=0;w<B.length;w++){A=B[w];y=typeof(A);if(y=="string"){A='"'+c.util.escapeNewLine(A)+'"'}else{if(y=="object"&&A!==null){A=c.util.stringify(A)}}x.push(String(A))}}else{if(z){return z.toString()}else{for(C in B){A=B[C];y=typeof(A);if(y=="string"){A='"'+A+'"'}else{if(y=="object"&&A!==null){A=c.util.stringify(A)}}x.push('"'+C+'":'+String(A))}}}return(v?"[":"{")+String(x)+(v?"]":"}")}}},trimStr:function(v){if(typeof v.trim==="function"){return v.trim()}else{if(typeof v==="string"){return v.replace(/^\s+|\s+$/g,"")}}return v},clientDataString:function(B){var y=function(E){var C=E;if(typeof E==="function"){try{C=E()}catch(D){C=null}}return C};if(typeof B==="object"){for(var x in B){var z=B[x];if(z===e||(typeof z!=="boolean"&&z!==0&&!z)){delete B[x];continue}if(!(z instanceof Array)){B[x]=new Array();var A=y(z);if(A===e||(typeof A!=="boolean"&&A!==0&&!A)){delete B[x]}else{B[x].push(A)}}else{var v=[];for(var w=0;w<z.length;w++){z[w]=y(z[w]);if(!(z[w]===e||(typeof z[w]!=="boolean"&&z[w]!==0&&!z[w]))){v.push(z[w])}}if(v.length>0){B[x]=v}else{delete B[x]}}}}return c.util.stringify(B)},isColorTooLight:function(w){w=w.indexOf("#")===0?w.substr(1,w.length):w;var y=parseInt(w.substr(0,2),16);var x=parseInt(w.substr(2,2),16);var v=parseInt(w.substr(4,2),16);var z=((y*299)+(x*299)+(v*299))/1000;return z>=128},isEmptyObject:function(v){for(var w in v){if(v.hasOwnProperty(w)){return false}}return true},parseJSON:function(v){return new Function("return "+v+";")()},bind:function(A,y){var B=this;var z=B.callbacks||{};if(A!==e&&typeof(y)==="function"){var C=y;y=function(){return C.apply(this,arguments)};y.cbid=(C.cbid=B.cbid++);A=(A||"").match(/\S+/g)||[""];var x=A.length;while(x--){var w=A[x];var v=z[w]||{};v[y.cbid]=y;z[w]=v}B.callbacks=z}return B},unbind:function(v,w){var x=this;if(v!==e){if(typeof(x.callbacks)==="object"&&typeof(x.callbacks[v])==="object"){if(typeof(w)==="function"&&w.cbid){delete x.callbacks[v][w.cbid]}else{delete x.callbacks[v]}}}return x},executeCallbacks:function(){var z=this;if(typeof z.enableCallbacks==="boolean"&&z.enableCallbacks){var w=arguments[0];if(w!==e&&typeof z.callbacks==="object"&&typeof z.callbacks[w]==="object"){for(var x in z.callbacks[w]){if(typeof z.callbacks[w][x]==="function"){var v={};if(arguments[1]!==e){v=arguments[1]}var y=z.callbacks[w][x].apply(this,[v]);if(typeof y==="boolean"&&!y){return false}}}}}},markSurveyAsClosed:function(w){if(w){try{var v=c.util.getSessionCookie();if(v.closedSurveys===e||!v.closedSurveys){v.closedSurveys=""}if(v.closedSurveys.indexOf("##"+w)<0){v.closedSurveys+="##"+w}c.util.updateSessionCookie(v)}catch(x){}}},markSurveyAsTaken:function(w){if(w){try{var v=c.util.getWebengageCookie();if(v.takenSurveys===e||!v.takenSurveys){v.takenSurveys=""}if(v.takenSurveys.indexOf("##"+w)<0){v.takenSurveys+="##"+w}c.util.setWebengageCookie(v)}catch(x){}}},markEntityAsShown:function(z,y){if(z&&y){var v=1;try{var x=c.util.getWebengageCookie();if("notification"===y){x.seenNIds=x.seenNIds&&x.seenNIds!==e?x.seenNIds:"";if(x.seenNIds.indexOf("##"+z)<0){x.seenNIds+="##"+z+"="+v}else{var w=new RegExp("##"+z+"=(\\d+)","g");x.seenNIds=x.seenNIds.replace(w,function(B,C){v=(+C+1);return"##"+z+"="+v})}}else{if("survey"===y){x.seenSIds=x.seenSIds&&x.seenSIds!==e?x.seenSIds:"";if(x.seenSIds.indexOf("##"+z)<0){x.seenSIds+="##"+z+"="+v}else{var w=new RegExp("##"+z+"=(\\d+)","g");x.seenSIds=x.seenSIds.replace(w,function(B,C){v=(+C+1);return"##"+z+"="+v})}}}c.util.setWebengageCookie(x)}catch(A){}}},markNotificationAsClicked:function(x){if(x){try{var v=c.util.getWebengageCookie();v.takenNIds=v.takenNIds&&v.takenNIds!==e?v.takenNIds:"";if(v.takenNIds.indexOf("##"+x)<0){v.takenNIds+="##"+x}c.util.setWebengageCookie(v)}catch(w){}}},markNotificationAsClosed:function(x){if(x){try{var v=c.util.getSessionCookie();if(v.closedNIds===e||!v.closedNIds){v.closedNIds=""}if(v.closedNIds.indexOf("##"+x)<0){v.closedNIds+="##"+x}c.util.updateSessionCookie(v)}catch(w){}}},setMinimizedState:function(v,x,z){var y=(v==="notification"?"minNIds":"minSIds");if(x){try{var w=c.util.getSessionCookie();if(w[y]===e||!w[y]){w[y]=""}if(z){if(w[y].indexOf("##"+x)<0){w[y]+="##"+x}}else{w[y]=w[y].replace("##"+x,"")}c.util.updateSessionCookie(w)}catch(A){}}},getMinimizedState:function(v,x){var y=(v==="notification"?"minNIds":"minSIds");var z=false;if(x){try{var w=c.util.getSessionCookie();if(w[y]!==e){if(0<=w[y].indexOf("##"+x)){z=true}}}catch(A){}}return z},getVersion:function(){return n.widgetVersion},updateSessionCookieOnWidgetLoad:function(x){var w=c.util.getSessionCookie();w.pvc=(w.pvc?w.pvc+1:1);if(x&&a.referrer&&(!w.referrer||w.referrer!==a.referrer)){var v=a.referrer.match(/:\/\/(.[^\/]+)/)[1];if(!v.match(new RegExp(c.util.escapeForRegExp(x)+"$","gi"))){w.referrer=a.referrer}}c.util.updateSessionCookie(w)},getHashCode:function(z){var x=0,w,v,y=z||"";if(y.length==0){return x}for(w=0,l=y.length;w<l;w++){v=y.charCodeAt(w);x=((x<<5)-x)+v;x|=0}return x},getTotalTimesShown:function(A,z){var v=0;if(A&&z){try{var y=u.getWebengageCookie();if(y&&(y.seenNIds||y.seenSIds)){var x=new RegExp("##"+A+"=(\\d+)");var w="";if("notification"===z){w=y.seenNIds.match(x)}else{if("survey"===z){w=y.seenSIds.match(x)}}if(w instanceof Array&&w.length>1){v=w[1]}}}catch(B){}}return v},attachEventListners:function(y,v){var w=(y==="survey"?c.survey.callbacks:(y==="feedback"?c.feedback.callbacks:c.notification.callbacks));if(typeof w!==e&&w){for(eventName in w){var x=w[eventName];if(typeof callbacks!=e&&x){for(_cbid in x){this.bind.apply(v,[eventName,x[_cbid]])}}}}},hasSVG:function(){return !!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},onDocReady:function(v){if(typeof v==="function"){if(a.body){c.withELog(function(){v()});return}if(a.addEventListener){a.addEventListener("DOMContentLoaded",function(){c.withELog(function(){a.removeEventListener("DOMContentLoaded",arguments.callee,false);v()})},false)}else{if(a.attachEvent){a.attachEvent("onreadystatechange",function(){c.withELog(function(){if(a.readyState==="complete"){a.detachEvent("onreadystatechange",arguments.callee);v()}})});if(a.documentElement.doScroll&&d==d.top){(function(){c.withELog(function(){try{a.documentElement.doScroll("left")}catch(w){setTimeout(arguments.callee,0);return}v()})})()}}}}},abortAllInstances:function(v){c.withELog(function(){if(v.length>0){for(var w=0;w<v.length;w++){if(typeof v[w].abort==="function"){v[w].abort()}}}})},abortInstance:function(v){c.withELog(function(){if(v){if(typeof v.close==="function"){v.close()}else{v.onLoad(function(){this.close()})}}})},uwats:function(){if(!f["webengage.isDemoMode"]){var v=1000*60*60*24;var x=new Date().getTime()-(7*v);if(webengage_fs_configurationMap.lastWidgetCheckDate){var w=new Date(webengage_fs_configurationMap.lastWidgetCheckDate);if(w<x){c.eLog(null,"info",w.getTime(),"widget-verified")}}else{c.eLog(null,"info","no-check-date","widget-verified")}}},isSmallScreen:function(){var v=320,w=d.screen.availWidth;return(w<=v?true:false)},webklitWorkAround:function(v){var w=a.body.scrollTop||0;if(a.location.toString().match(/#(top)?$/)){v.body.scrollTop=0;a.body.scrollTop=w}},getWeDataContainer:function(){return n.weDataContainer},withWeJquery:function(v){c.jQSt=c.jQSt||0;switch(c.jQSt){case 1:setTimeout(function(){c.util.withWeJquery(v)},100);break;case 2:if(typeof v==="function"){v()}break;default:c.jQSt=1;c.util.loadScript.apply(n.widgetContainer,[n.weJquery,function(){$weJQuery=jQuery.noConflict(true);c.jQSt=2;if(typeof v==="function"){v()}}]);break}}}},true);r(c,{getWidgetVersion:function(){return f["webengage.widgetVersion"]||"4.0"}},true);var u=c.util;var n={widgetVersion:"4",weJquery:"//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js",baseWebEngageUrl:"//webengage.com",feedbackAppHost:"feedback.webengage.com",surveyAppHost:"survey.webengage.com",widgetDomain:"//d3701cc9l7v9a6.cloudfront.net",baseStaticUrl:"//d3701cc9l7v9a6.cloudfront.net",loadSurveyWidgetUrl:"/js/widget/we-survey-widget-v-4.0.js?v=183.0",loadSurveyWidgetUrlv3:"/js/widget/we-survey-widget.js?v=183.0",notificationWidgetScriptUrl:"/js/widget/we-notification-widget-v-4.1.js?v=183.0",findAllTakenSurveysUrl:function(){return"//survey.webengage.com/publisher-widget-loader.html?action=findAllTakenSurveys&licenseCode="+f["webengage.licenseCode"]+"&url="+encodeURIComponent(u.getClientPageUrl())},widgetContainerId:"webklipper-publisher-widget-container",feedbackImageBaseUrl:"//s3-ap-southeast-1.amazonaws.com/wk-static-files/webengage/feedbacktab/",loadFeedbackWidgetUrl:"/js/widget/we-feedback-widget-v-4.0.js?v=183.0",loadFeedbackWidgetUrlv3:"/js/widget/we-feedback-widget.js?v=183.0",gaCallbacksScriptUrl:"//d3701cc9l7v9a6.cloudfront.net/js/widget/ga-callbacks-helper.js?v=183.0"};var q={};u.extend("logger",(function(){var w={containerCss:{position:function(){return c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"},cursor:"default",margin:0,zIndex:(u.getMaxZIndex()+1),backgroundColor:"red",right:"0px",bottom:"0px",display:"block",padding:"10px",maxWidth:"500px",textAlign:"left",lineHeight:"17px",background:"none repeat scroll 0 0 #ff9",border:"1px solid #fc6",borderBottomWidth:"0px",borderRightWidth:"0px",borderTopLeftRadius:"5px",MozBorderRadiusTopleft:"5px",WebkitBorderTopLeftRadius:"5px",boxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",MozBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",WebkitBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",fontFamily:"Arial, sans-serif",fontSize:"13px"},dataDivCss:{margin:"0px",padding:"0px",color:"#000",textShadow:"1px 1px #f1f1f1",textDecoration:"none",fontFamily:"inherit",fontSize:"inherit"},dataDivLinkCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",fontFamily:"inherit",fontSize:"inherit"},closeButtonCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",cursor:"pointer",cssFloat:"right",styleFloat:"right",marginRight:"5px",marginLeft:"30px"}},v=function(H,G){var z=a.getElementById("webengage-error-messages");if(z){z.parentNode.removeChild(z)}var B=a.createElement("div");B.setAttribute("id","webengage-error-messages");B=u.applyCss(B,w.containerCss);a.body.insertBefore(B,null);var F=a.createElement("div");F=u.applyCss(F,w.closeButtonCss);F.innerHTML="x";B.appendChild(F);F.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode)};var y=a.createElement("div");y=u.applyCss(y,w.dataDivCss);B.appendChild(y);y.innerHTML=H;var C=y.getElementsByTagName("a");if(C&&C.length>0){for(var D=0;D<C.length;D++){u.applyCss(C[D],w.dataDivLinkCss);var A=C[D].getAttribute("href");var x=A.split("#");var E=x[0];E=E.indexOf("?")<0?(E+"?"):E;E=E+"&ref=widget-message";E=x.length==2?(E+"#"+x[1]):E;C[D].setAttribute("href",E)}}c.eLog(null,G,H,H);return B};return{success:function(x){return v(x,"success")},warn:function(x){return v(x,"warn")},error:function(x){return v(x,"error")}}})());u.extend("GEO",{country:function(){return this._country||""},country_code:function(){return this._country_code||""},region:function(){return this._region||""},city:function(){return this._city||""},latitude:function(){return this._latitude||""},longitude:function(){return this._longitude||""},serverTimeStamp:function(){return this._serverTimeStamp},ip:function(){return this._ip||""},setGeoData:function(x){var w=this,v=x||{};w._country=v.geoplugin_countryName||"";w._country_code=v.geoplugin_country_code||"";w._region=v.geoplugin_region||"";w._city=v.geoplugin_city||"";w._latitude=v.geoplugin_latitude||"";w._longitude=v.geoplugin_longitude||"";w._serverTimeStamp=v.serverTimeStamp;w._ip=v.clientIp;c.getUser().country=w._country;c.getUser().city=w._city;c.getUser().ip=w._ip},load:function(w){var v="//geoservice.webengage.com/geoip/?jsoncallback="+encodeURI("webengage.GEO.setGeoData");u.loadScript.apply(n.widgetContainer,[v,function(){u.updateSessionCookieGeoData();if(typeof w==="function"){w()}}])}});u.extend("BrowserDetect",(function(){var y,A,w,C=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:d.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Windows,Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],z=[{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"}],x=[{string:navigator.userAgent,subString:"iPhone",identity:"Mobile"},{string:navigator.userAgent,subString:"iPod",identity:"Mobile"},{string:navigator.userAgent,subString:"Android,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Windows Phone",identity:"Mobile"},{string:navigator.userAgent,subString:"BlackBerry,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"BB10,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Android",identity:"Tablet"},{string:navigator.userAgent,subString:"iPad",identity:"Tablet"},{string:navigator.userAgent,subString:"Windows,Tablet",identity:"Tablet"}],v=function(K){for(var G=0;G<K.length;G++){var H=K[G].string;var J=K[G].prop;this._versionSearchString=K[G].versionSearch||K[G].identity;if(H){var I=K[G].subString.split(",");var F=false;for(var E=0;E<I.length;E++){if(H.indexOf(I[E])==-1){F=false;break}F=true}if(F){return K[G].identity}}else{if(J){return K[G].identity}}}},B=function(G){var F=G.indexOf(this._versionSearchString);if(F==-1){return}var E=parseFloat(G.substring(F+this._versionSearchString.length+1));if(y=="Explorer"&&7<=E){if(G.indexOf("Trident/4")!=-1){E=8}else{if(G.indexOf("Trident/5")!=-1){E=9}else{if(G.indexOf("Trident/6")!=-1){E=10}}}}return E},D=function(){if(y&&A&&w){return}y=v(C)||"An unknown browser";A=B(navigator.userAgent)||B(navigator.appVersion)||"an unknown version";w=v(z)||"an unknown OS";_device=v(x)||(u.isSmallScreen()?"Mobile":"Desktop")};return{browser:function(){return D()||y},version:function(){return D()||A},os:function(){return D()||w},device:function(){return D()||_device},is_this_the_worlds_most_annoying_browser:function(){return(a.all&&!d.opera&&!d.XMLHttpRequest)},ie:function(){return(navigator.appName=="Microsoft Internet Explorer")},isMobile:function(){var G=this.os(),E=false,H=["iOS","Android","Windows Phone","Mobile"];for(var F=0;F<H.length;F++){if(G==H[F]){E=true;break}}return E}}})());u.extend("feedback",(function(){var v=[],w={onLoad:function(x){return this.bind("load",x)},onOpen:function(x){return this.bind("open",x)},onSubmit:function(x){return this.bind("submit",x)},onClose:function(x){return this.bind("close",x)},bind:function(){return u.bind.apply(this,arguments)},unbind:function(){return u.unbind.apply(this,arguments)},executeCallbacks:function(){return u.executeCallbacks.apply(this,arguments)}};return{cbid:1,getMobileLoadingDiv:function(y){var x=a.createElement("div");x.id=y||n.widgetContainerId+"-loading";x=c.util.applyCss(x,{position:"fixed",left:(c.util.getWindowWidth()*0.05)+"px",width:(c.util.getWindowWidth()*0.9)+"px",opacity:"1",background:"#f9f9f9",color:"#666","z-index":c.util.getMaxZIndex(),textAlign:"center","padding-top":"20px","padding-bottom":"20px",fontFamily:"Arial, sans-serif",fontSize:"10px",display:"none"});return x},getLoadingDiv:function(y){var x=a.createElement("div");x.id=y||n.widgetContainerId+"-loading";x=c.util.applyCss(x,{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"});return x},getLightBoxBaseDiv:function(){var x=a.createElement("div");c.util.applyCss(x,{display:"block",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),position:"absolute",overflow:"hidden",top:"0",left:"0",height:a.body.scrollHeight+"px",width:"100%","background-color":"rgba(0, 0, 0, .85)"});x.id=n.widgetContainerId+"-base";return x},getLightBoxContainerDiv:function(){var y=a.createElement("div");c.util.applyCss(y,{display:"block",top:"0",left:"0",width:"100%",height:c.util.getWindowHeight()+"px",position:"absolute",outline:"none !important","-webkit-backface-visibility":"hidden",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),"-webkit-overflow-scrolling":"touch"});y.setAttribute("tabIndex",-1);y.id=n.widgetContainerId+"-light-box-container";var x=a.createElement("div");c.util.applyCss(x,{display:"block","text-align":"center",position:"absolute",width:"100%",height:"100%",left:"0",top:"0",outline:"none !important","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",padding:"0 8px",margin:"0","overflow-y":"auto","overflow-x":"hidden"});x.id=n.widgetContainerId+"-light-box-content";y.appendChild(x);return y},render:function(x){return c.withELog(function(){return(new function(){c.feedback.clear();var K=this;K.cbid=1;v[v.length]=K;K.abort=function(){u.abortInstance(this)};K._feedbackOptions={launchType:f["webengage.feedback.launchType"]||"",externalLinkId:f["webengage.feedback.externalLinkId"]||"",alignment:f["webengage.feedback.alignment"]||"",borderColor:f["webengage.feedback.borderColor"]||"",backgroundColor:f["webengage.feedback.backgroundColor"]||"",snapshotEnabled:f["webengage.feedback.snapshotEnabled"]||"",defaultCategory:f["webengage.feedback.defaultCategory"]||"",showAllCategories:(typeof f["webengage.feedback.showAllCategories"]==="boolean"&&!f["webengage.feedback.showAllCategories"])?false:true,showForm:f["webengage.feedback.showForm"]||false,isDemoMode:f["webengage.feedback.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.feedback.customData"]||f["webengage.customData"]||{},formData:f["webengage.feedback.formData"]||f["webengage.formData"]||[],enableCallbacks:f["webengage.feedback.enableCallbacks"]||f["webengage.enableCallbacks"]||false};if(x!==e&&x.data!==e&&x.data){var Z=x.data;if(Z.name!==e&&Z.name){K._feedbackOptions.formData.push({name:"name",value:Z.name})}if(Z.email!==e&&Z.email){K._feedbackOptions.formData.push({name:"email",value:Z.email})}if(Z.category!==e&&Z.category){K._feedbackOptions.formData.push({name:"category",value:Z.category})}}var C={feedbackLaunchType:"launchType",feedbackExternalLinkId:"externalLinkId",feedbackButtonAlignment:"alignment",feedbackButtonBorderColor:"borderColor",feedbackButtonBackgroundColor:"backgroundColor",defaultFeedbackCategory:"defaultCategory",showAllFeedbackCategories:"showAllCategories",showFeedbackForm:"showForm",data:"customData",demo:"isDemoMode"};if(x!==e&&!u.isEmptyObject(x)){for(var y in x){var W=C[y];if(W!==e&&W){x[W]=x[y];delete x[y]}}}K._feedbackOptions=u.copy(K._feedbackOptions,(x?x:{}),true);K.enableCallbacks=(typeof K._feedbackOptions.enableCallbacks==="boolean"?K._feedbackOptions.enableCallbacks:false);u.copy(K,w,true);K.onLoad((K._feedbackOptions.onLoad||f["webengage.feedback.onLoad"]));K.onSubmit((K._feedbackOptions.onSubmit||f["webengage.feedback.onSubmit"]));K.onClose((K._feedbackOptions.onClose||f["webengage.feedback.onClose"]));K.onOpen((K._feedbackOptions.onOpen||f["webengage.feedback.onOpen"]));u.attachEventListners("feedback",K);if(q.feedback&&(q.feedback.isEnabled||K._feedbackOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&q.sslEnabled))&&!q.isFQuotaOver){var L=q.feedback.config,S={alignment:["right","left"],launchTypes:["feedbackButton","externalLink"],containerCss:{margin:0,padding:0,position:(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"),border:"5px solid #ccc",backgroundColor:"#f9f9f9",borderWidth:"1px",borderStyle:"solid"},containerRightCss:{right:"0px",borderRightWidth:"0px"},containerLeftCss:{left:"0px",borderLeftWidth:"0px"},commonCss:{margin:0,padding:0,cursor:"pointer",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center 0",display:"block",paddingBottom:"7px",paddingLeft:"3px",paddingRight:"3px",paddingTop:"7px"},tabCssWithIcon:{backgroundPosition:"center bottom",paddingBottom:"33px"},closeCommonCss:{height:"22px",width:"22px",cursor:"pointer",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",position:"absolute",top:"-14px",backgroundImage:"url('"+n.baseStaticUrl+"/images/icons/feedback-widget-close.png')",backgroundColor:"transparent",display:"none"},leftCloseCss:{right:"-14px"},rightCloseCss:{left:"-14px"},feedbackBgImageForDarkBackground:n.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-dark.png",feedbackBgImageForLightBackground:n.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-light.png",feedbackTextImage:n.feedbackImageBaseUrl+L.imgPath,sizeCss:{height:L.imgHeight+"px",width:L.imgWidth+"px"},leftCss:{cssFloat:"right",styleFloat:"right"},rightCss:{cssFloat:"left",styleFloat:"left"},loadingCss:{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"},maxWidth:"450px",maxHeight:(c.BrowserDetect.ie()?"349px":"345px")},U={getButtonCssBasedOnConfig:function(ab,ac){var aa={};aa=u.copy(aa,S.sizeCss);if(ab=="left"){aa=u.copy(aa,S.leftCss)}else{aa=u.copy(aa,S.rightCss)}if(ac){aa=u.copy(aa,S.tabCssWithIcon)}return aa},getContainerCssBasedOnConfig:function(ab){var aa={};aa=u.copy(aa,S.containerCss);if(ab=="right"){aa=u.copy(aa,S.containerRightCss)}else{aa=u.copy(aa,S.containerLeftCss)}return aa},getCloseCssBasedOnConfig:function(ab){var aa={};if(ab=="right"){aa=u.copy(aa,S.rightCloseCss)}else{aa=u.copy(aa,S.leftCloseCss)}return aa},getButtonCssBasedOnBackgroundColor:function(ab){var aa={};if(u.isColorTooLight(ab)){aa=u.copy(aa,{backgroundImage:("url('"+S.feedbackBgImageForLightBackground+"')")})}else{aa=u.copy(aa,{backgroundImage:("url('"+S.feedbackBgImageForDarkBackground+"')")})}return aa},getCustomTextImageCss:function(){var aa={};aa=u.copy(aa,{backgroundImage:("url('"+S.feedbackTextImage+"')")});return aa}},R=(L.closeImg===e||L.closeImg===null||L.closeImg==="")?(n.baseStaticUrl+"/images/icons/feedback-widget-close.png"):("//s3-ap-southeast-1.amazonaws.com/"+L.closeImg),Q=u.getInitParamValue(K._feedbackOptions,"alignment",L.alignment,S.alignment),E=u.getInitParamValueAsArray(K._feedbackOptions,"launchType",L.launchType,S.launchTypes),D=u.getInitParamValueAsArray(K._feedbackOptions,"externalLinkId",L.externalLinkId),I=u.getInitParamValue(K._feedbackOptions,"backgroundColor",L.backgroundColor),X=u.getInitParamValue(K._feedbackOptions,"borderColor",L.borderColor),T=u.getInitParamValue(K._feedbackOptions,"snapshotEnabled",((L.snapshotEnabled===e)?true:L.snapshotEnabled)),V=u.inArray(E,S.launchTypes[0]),M=L.imgWidth,G=L.imgHeight,J=L.showWeIcon;I=I.indexOf("#")===0?I:("#"+I);X=X.indexOf("#")===0?X:("#"+X);var O=a.createElement("div");n.widgetContainer.appendChild(O);O.setAttribute("id",n.widgetContainerId+"-content");var Y=O.style;O=u.applyCss(O,S.containerCss);O=u.applyCss(O,U.getContainerCssBasedOnConfig(Q));O.style.width=(parseInt(M)+3+3)+"px";var A=(parseInt(G)+7+7+(J?(3+26):0))+"px";Y.borderColor=X;Y.top=(("innerHeight" in d?d.innerHeight:a.documentElement.clientHeight)-parseInt(G))/2+"px";Y.zIndex=(u.getMaxZIndex()+1);var H=a.createElement("div");O.appendChild(H);H.id=n.widgetContainerId+"-close-div";H=u.applyCss(H,S.closeCommonCss);H=u.applyCss(H,U.getCloseCssBasedOnConfig(Q));H.style.backgroundImage="url('"+R+"')";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){H.style.backgroundImage="";H.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+R+"')"}var P=a.createElement("div");O.appendChild(P);P.setAttribute("id",n.widgetContainerId+"-content-expand-collapse");var N=P.style;P=u.applyCss(P,S.commonCss);P=u.applyCss(P,U.getButtonCssBasedOnConfig(Q,J));P=u.applyCss(P,U.getButtonCssBasedOnBackgroundColor(I));if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){N.backgroundImage="";var z=(u.isColorTooLight(I)?S.feedbackBgImageForLightBackground:S.feedbackBgImageForDarkBackground);N.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+z+"')"}N.backgroundColor=I;N.zIndex=u.getMaxZIndex()+1;if(!V){O.style.display="none"}var F=a.createElement("div");P.appendChild(F);F.style.width=parseInt(M)+"px";F.style.height=parseInt(G)+"px";F.style.margin="0px";F.style.padding="0px";F=u.applyCss(F,U.getCustomTextImageCss());if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){F.style.backgroundImage="";N.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+S.feedbackTextImage+"')"}H.style.zIndex=u.getMaxZIndex()+1;K.close=function(){try{O.removeChild(a.getElementById(n.widgetContainerId+"-loading"))}catch(aa){}try{O.removeChild(a.getElementById(n.widgetContainerId+"-content"))}catch(aa){}try{a.getElementById(n.widgetContainerId+"-content-expand-collapse").isCurrentlyOpen=false}catch(aa){}H.style.display="none";O.style.width=(parseInt(M)+3+3)+"px";if(!V){P.style.display="none"}};H.onclick=function(){c.withELog(function(){K.close()})};function B(){if(L.mobileLB&&(c.BrowserDetect.isMobile()||u.isSmallScreen())){O.style.display="block";var ad=c.feedback.getLightBoxBaseDiv();n.weDataContainer.appendChild(ad);var ac=c.feedback.getLightBoxContainerDiv();n.weDataContainer.appendChild(ac);var ab=c.feedback.getMobileLoadingDiv();ab.innerHTML="Loading<br/>please wait ...";n.weDataContainer.appendChild(ab);var ae=c.util.getElementHeight(ab);var af=c.util.getWindowHeight();ab.style.top=(af-ae)/2+"px";ab.style.display="block"}else{O.style.display="block";O.style.width="300px";var ab=c.feedback.getLoadingDiv();ab=u.applyCss(ab,S.loadingCss);ab.innerHTML="Loading<br/>please wait ...";O.appendChild(ab);u.alignCenter(ab,O,Q);H.style.display="block"}K.feedbackLoadStartTime=new Date();var aa=n.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?n.loadFeedbackWidgetUrlv3:n.loadFeedbackWidgetUrl);c.feedbackLoadStartTime=new Date();u.withWeJquery(function(){var ag=a.createElement("script");ag.type="text/javascript";ag.src=aa;n.widgetContainer.appendChild(ag)})}P.onclick=function(){c.withELog(function(){B()})};if(D&&D.length>0){(function(){for(var ab=0;ab<D.length;ab++){var ac=D[ab];var aa=a.getElementById(ac);if(aa){aa.onclick=function(ad){var ae=ad||d.event;ae.cancelBubble=true;if(ae.stopPropagation){ae.stopPropagation()}if(ae.preventDefault){ae.preventDefault()}else{ae.returnValue=false}P.onclick();return false}}}})()}a.$FeedbackWidgetInitializer={containerId:n.widgetContainerId,licenseCode:h,appHost:n.feedbackAppHost,minWidth:(parseInt(M)+3+3)+"px",maxWidth:S.maxWidth,minHeight:A,maxHeight:S.maxHeight,showFeedbackButton:V,buttonAlignment:Q,borderColor:X.substring(1),snapshotEnabled:T,currentInstance:K,mobileLBEnabled:L.mobileLB&&(c.BrowserDetect.isMobile()||u.isSmallScreen())};if(K._feedbackOptions.showForm==true){P.onclick()}}else{if(q.feedback&&q.feedback.isEnabled&&a.location.protocol=="https:"&&!q.sslEnabled){c.eLog(null,"error","Feedback - Widget turned off for SSL encrypted page","Feedback - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{n.widgetContainer.removeChild(a.getElementById(n.widgetContainerId+"-content"))}catch(x){}v=[];a.$FeedbackWidgetInitializer=null})},abort:function(){u.abortAllInstances(v)},attachEventListner:function(){var x=this,y=arguments;c.withELog(function(){u.bind.apply(x,y)})}}})());u.extend("ruleExecutor.constants",{SEARCH_ENGINE_REGEXP:{google:{pattern:"^(?:http(s)?://)?(www\\.)?google\\..*/.*$",queryParam:"q"},yahoo:{pattern:"^(?:http(s)?://)?(?:([a-z]{2})\\.)?search\\.yahoo\\.com/.*$",queryParam:"p"},bing:{pattern:"^(?:http(s)?://)?((?:www|[a-z]{2})\\.)?bing\\.com/search\\?.*$",queryParam:"q"},ask:{pattern:"^(?:http(s)?://)?www\\.ask\\.com/.*$",queryParam:"q"},baidu:{pattern:"^(?:http(s)?://)?www\\.baidu\\.com/.*$",queryParam:"wd"},yandex:{pattern:"^(?:http(s)?://)?www\\.yandex\\.com/.*$",queryParam:"text"},duckduckgo:{pattern:"^(?:http(s)?://)?www\\.duckduckgo\\.com/.*$",queryParam:"q"}},SOCIAL_MEDIA_REGEX:"^(?:http(s)?://)?(.*.)?(facebook|twitter|t|pinterest)\\.(com|co)/.*$"});u.extend("ruleExecutor.util",(function(v){return{isMatches:function(y,w){if(y){if(y instanceof Array){for(var z=0;z<y.length;z++){if(c.ruleExecutor.util.isMatches(y[z],w)){return true}}}else{if(w instanceof Array){for(var x=0;x<w.length;x++){if(y.match(new RegExp(w[x],"gi"))){return true}}}else{if(y.match(new RegExp(w,"gi"))){return true}}}}return false},getCurrentTimeInSec:function(z){var y=new Date(z);var w=y.getHours();var A=y.getMinutes();var x=y.getSeconds();return(w*60*60+A*60+x)},getClientTime:function(){var w=u.getCurrentTime();return c.ruleExecutor.util.getCurrentTimeInSec(w)},getPublisherTime:function(){var w=u.getCurrentTime(n.publisherTimeZoneOffset);return c.ruleExecutor.util.getCurrentTimeInSec(w)},isContainsSearchTerms:function(y,z){var x=false;if(typeof y!=="function"||!z||!(z instanceof Array)||z.length<=0){return false}var w=y();if(typeof w!==e&&w){for(var A=0;A<z.length;A++){x=c.ruleExecutor.util.isContains(w,c.ruleExecutor.util.jsTokenizer(z[A]," "),"contains_all");if(typeof x==="boolean"&&x){break}}}return x},isContains:function(B,F,x){var E=B;if(typeof(B)==="function"){E=B()}var D=false;var y=x||"contains_any";if(E!==e&&E){var w=[];if(E instanceof Array){for(var C=0;C<E.length;C++){w[E[C].toLowerCase()]=true}}else{w[E]=true}if(F!==e&&F){if(F instanceof Array){if(y=="contains_all"){for(var A=0;A<F.length;A++){if(w[F[A].toLowerCase()]==true){D=true;continue}D=false;break}}else{for(var z=0;z<F.length;z++){if(w[F[z].toLowerCase()]==true){D=true;break}}}}else{D=w[F.toLowerCase()]==true}}}return D},getReferrers:function(){var x=[];if(a.referrer){x[x.length]=a.referrer.toLowerCase()}var w=u.getSessionCookie();if(w&&w.referrer&&(!a.referrer||w.referrer!=a.referrer)){x[x.length]=w.referrer.toLowerCase()}return x},getCountry:function(){return u.getSessionCookie().country||null},getRegion:function(){return u.getSessionCookie().region||null},getCity:function(){return u.getSessionCookie().city||null},getSearchEngineMatchResult:function(){var z=c.ruleExecutor.util.getReferrers();var w={isSER:false};for(var y in v.SEARCH_ENGINE_REGEXP){for(var x=0;x<z.length;x++){if(c.ruleExecutor.util.isMatches(z[x],v.SEARCH_ENGINE_REGEXP[y].pattern)!=false){w.isSER=true;w.url=z[x];w.queryParam=v.SEARCH_ENGINE_REGEXP[y].queryParam;break}}if(w.isSER===true){break}}return w},isSearchEngineReference:function(){return(c.ruleExecutor.util.getSearchEngineMatchResult()).isSER},isSocialMediaReference:function(){return c.ruleExecutor.util.isMatches(c.ruleExecutor.util.getReferrers(),v.SOCIAL_MEDIA_REGEX)},isFirstTime:function(){var w=u.getSessionCookie();return(w&&(typeof w.isFirstTime==="boolean"&&w.isFirstTime))?true:false},getSearchTerms:function(){var y=null;var w=c.ruleExecutor.util.getSearchEngineMatchResult();if(w.isSER){var x=decodeURI(c.ruleExecutor.util.getParamValue(w.url,w.queryParam));if(x){y=c.ruleExecutor.util.jsTokenizer(x," ")}}return y},jsTokenizer:function(z,B){var A=[];if(z!==e&&z){var y=u.escapeForRegExp(",\r\n");if(B!==e&&B){if(B instanceof Array){y=u.escapeForRegExp(B.join(""))}else{y=u.escapeForRegExp(B)}}z=z.replace(new RegExp("["+y+"]","g"),"\n");var w=z.split(/\n/g);for(var x=0;x<w.length;x++){if(w[x]!=""){A[A.length]=w[x]}}}return A},getParamValue:function(x,z){var A="";var y=new RegExp("[\\?&]"+z+"=([^&#]*)");var w=y.exec(x);if(w!==null){A=w[1]}return A},getBrowser:function(){return c.BrowserDetect.browser()},getBrowserVersion:function(){return c.BrowserDetect.version()},getOS:function(){return c.BrowserDetect.os()},getDevice:function(){return c.BrowserDetect.device()},escapeForRegExp:function(w){return u.escapeForRegExp(w)},getTotalPageView:function(){var w=u.getSessionCookie();return(w&&w.pvc)?w.pvc:1},sampling:function(){var w=this.entityId;if(typeof w!="undefined"){var x=u.getWebengageCookie(),y=u.getHashCode(w+x.luid);return Math.abs(y%100)}return 0},getSessionCookieReferer:function(){var w=u.getSessionCookie();var x=w.referrer;if(!x){return null}return x}}})(c.ruleExecutor.constants));u.extend("ruleExecutor",(function(x,w){var v={referer:x.getReferrers,url:u.getClientPageUrl(),cookie:function(y){return u.getCookie(y,true)},country:x.getCountry,region:x.getRegion,city:x.getCity,time:"",isFirstTime:x.isFirstTime,isSER:x.isSearchEngineReference,isSMR:x.isSocialMediaReference,searchTerms:x.getSearchTerms,os:x.getOS,device:x.getDevice,browser:x.getBrowser,endUserTime:x.getClientTime,publisherTime:x.getPublisherTime,browser_version:x.getBrowserVersion,totalPageView:x.getTotalPageView,sampling:x.sampling,isDirectVisitor:x.getSessionCookieReferer};return{execute:function(z,A,y){y=u.copy(v,(y?y:{}),true);y.entityId=z;A=(A!==e)?A:true;return(new Function("_weUtil","_ruleUtil","_constants","operands","return ("+A+");")(u,x,w,y))}}})(c.ruleExecutor.util,c.ruleExecutor.constants));u.extend("survey",(function(){var w=[],x=function(M,B){if(M!==e&&M){var H=this,E=q.survey.config,R=E.theme||"",N="320px",K="1px",I=a.createElement("div");if(H._surveyOptions.width){var D=parseInt(H._surveyOptions.width,10);if(!isNaN(D)){N=D+"px"}}H.theme=R;H.surveyEId=M;H.showOnExit=(typeof B==="boolean"?B:false);var L=H._surveyOptions.scope[M]||H._surveyOptions.scope.all||null;if(L){H.scope=(L.scope?L.scope:"");H.scopeType=(L.scopeType?L.scopeType:"")}n.widgetContainer.appendChild(I);I.setAttribute("id",n.widgetContainerId+"-survey-content");var G=u.getInitParamValue(H._surveyOptions,"alignment",E.alignment,["left","right"]);var C=I.style;C.height=K;C.width=N;C.zIndex=(u.getMaxZIndex()+1);C.position=(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed");C.backgroundColor="transparent";if("right"==G){C.right="0px"}else{C.left="10px"}C.bottom="20px";C.display="block";var Q;var A;if(R=="dark"||R=="light"){Q=n.baseStaticUrl+"/images/webengage/icons/mini-survey-close-"+R+".png";A=n.baseStaticUrl+"/images/webengage/icons/mini-survey-expand-collapse-"+R+".png"}else{Q=n.baseStaticUrl+"/images/webengage/icons/mini-survey-close-light.png";A=n.baseStaticUrl+"/images/webengage/icons/mini-survey-expand-collapse-light.png"}var J=a.createElement("div");J.id=n.widgetContainerId+"-survey-close-div";J.innerHTML="&nbsp;";I.appendChild(J);var O=J.style;O.zIndex=u.getMaxZIndex()+1;O.position="absolute";O.right="30px";O.bottom="5px";O.height="16px";O.display="none";O.width="16px";O.cursor="pointer";O.backgroundImage="url('"+Q+"')";O.backgroundRepeat="no-repeat";O.backgroundPosition="0 0";O.backgroundColor="transparent";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){O.backgroundImage="";O.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+Q+"')"}var P=a.createElement("div");P.id=n.widgetContainerId+"-survey-minimize-div";P.innerHTML="&nbsp;";I.appendChild(P);var z=P.style;z.zIndex=u.getMaxZIndex()+1;z.position="absolute";z.right="50px";z.bottom="5px";z.height="16px";z.width="16px";z.display="none";z.cursor="pointer";z.backgroundImage="url('"+A+"')";z.backgroundRepeat="no-repeat";z.backgroundPosition="0 0";z.backgroundColor="transparent";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){z.backgroundImage="";z.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+A+"')"}a.$SurveyWidgetInitializer={currentInstance:H,containerId:n.widgetContainerId,licenseCode:h,appHost:n.surveyAppHost,width:parseInt(N,10)};var F=n.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?n.loadSurveyWidgetUrlv3:n.loadSurveyWidgetUrl);u.withWeJquery(function(){var S=a.createElement("script");S.type="text/javascript";S.src=F;n.widgetContainer.appendChild(S)})}},y={onLoad:function(z){return this.bind("load",z)},onOpen:function(z){return this.bind("open",z)},onSubmit:function(z){return this.bind("submit",z)},onView:function(z){return this.bind("view",z)},onComplete:function(z){return this.bind("complete",z)},onClose:function(z){return this.bind("close",z)},bind:function(){return u.bind.apply(this,arguments)},unbind:function(){return u.unbind.apply(this,arguments)},executeCallbacks:function(){return u.executeCallbacks.apply(this,arguments)}},v=function(C,E,z){if(C!==e&&C){if(typeof C==="object"){if(C instanceof Array){for(var A=0;A<C.length;A++){v(C[A],E,z)}}else{var B=C.scope;if(B){var D=C.surveyIds;if(D!==e&&D instanceof Array&&D.length>0){for(j=0;j<D.length;j++){z[D[j]]={scope:B,scopeType:(C.scopeType||"")}}}else{z.all={scope:B,scopeType:(C.scopeType||"")}}}}}else{z.all={scope:C,scopeType:(E||"")}}}};return{cbid:1,render:function(z){return c.withELog(function(){return(new function(){c.survey.clear();var F=this;F.cbid=1;w[w.length]=F;F.abort=function(){u.abortInstance(this)};var A={surveyId:f["webengage.survey.surveyId"]||"",skipRules:f["webengage.survey.skipRules"]||false,forcedRender:f["webengage.survey.forcedRender"]||false,delay:f["webengage.survey.delay"]||-1,customData:f["webengage.survey.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.survey.ruleData"]||f["webengage.ruleData"]||{},isDemoMode:f["webengage.survey.isDemoMode"]||f["webengage.isDemoMode"]||false,alignment:f["webengage.survey.alignment"]||"",scope:f["webengage.survey.scope"]||f["webengage.scope"]||"",scopeType:f["webengage.survey.scopeType"]||f["webengage.scopeType"]||"",enableCallbacks:f["webengage.survey.enableCallbacks"]||f["webengage.enableCallbacks"]||false,width:f["webengage.survey.width"]};var B={showAllClosedAndTakenSurveys:"forcedRender",data:"customData",demo:"isDemoMode"};if(z!==e&&!u.isEmptyObject(z)){for(var E in z){var C=B[E];if(C!==e&&C){z[C]=z[E];delete z[E]}}}F._surveyOptions=u.copy(A,(z?z:{}),true);F._surveyOptions.forcedRender=typeof F._surveyOptions.forcedRender==="boolean"?F._surveyOptions.forcedRender:false;if(F._surveyOptions.forcedRender){F._surveyOptions.scope=(new Date()).getTime()}else{var G={};v(F._surveyOptions.scope,F._surveyOptions.scopeType,G);F._surveyOptions.scope=G||""}F.enableCallbacks=(typeof F._surveyOptions.enableCallbacks==="boolean"?F._surveyOptions.enableCallbacks:false);if(q.survey&&(q.survey.isEnabled||F._surveyOptions.isDemoMode)&&!u.isEmptyObject(q.survey.ruleMap)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&q.sslEnabled))&&!q.isSRQuotaOver){u.copy(F,y,true);F.onLoad((F._surveyOptions.onLoad||f["webengage.survey.onLoad"]));F.onSubmit((F._surveyOptions.onSubmit||f["webengage.survey.onSubmit"]));F.onClose((F._surveyOptions.onClose||f["webengage.survey.onClose"]));F.onOpen((F._surveyOptions.onOpen||f["webengage.survey.onOpen"]));F.onComplete((F._surveyOptions.onComplete||f["webengage.survey.onComplete"]));u.attachEventListners("survey",F);F.totalTimeElapsed=0;var D=c.setInterval(function(){F.totalTimeElapsed+=10;var Q=u.getSessionCookie();if(F._surveyOptions.skipRules||(Q&&Q.country)||F.totalTimeElapsed>5000){if(!Q){Q=u.setSessionCookie()}clearInterval(D);var H=q.survey.ruleMap,U=u.getWebengageCookie(),W=F._surveyOptions.surveyId,V=[],O={};if(W&&H[W]){var Z={};Z[W]=H[W];H=Z}var ac=null;for(var ab in H){var P=ab,S=H[ab].ruleCode,M=(typeof H[ab].showOnExit==="boolean"?H[ab].showOnExit:false),N=(M?0:(H[ab].totalTimeOnSite?H[ab].totalTimeOnSite-((new Date()).getTime()-Q.sst):0)),aa=(M?0:Math.max(N,H[ab].timeSpent)),X=H[ab].maxTimesPerUser,I=H[ab].startTimestamp,L=H[ab].endTimestamp,K=F._surveyOptions.scope[P]||F._surveyOptions.scope.all||null,T=P+(K&&K.scope&&(K.scopeType+"").toUpperCase()!="GLOBAL"?"["+u.escapeScopeChars(K.scope)+"]":""),Y=u.escapeForRegExp(T);if(!F._surveyOptions.isDemoMode){var J=(new Date()).getTime()+(Q.tsD&&!isNaN(Q.tsD)?parseInt(Q.tsD,10):0);if(typeof L!="undefined"&&L&&!isNaN(L)&&(L<J)){continue}if(typeof I!="undefined"&&I&&!isNaN(I)&&(J<I)){continue}if(!F._surveyOptions.forcedRender&&((Q&&Q.closedSurveys!==e&&(Q.closedSurveys.match("##"+Y+"##")||Q.closedSurveys.match("##"+Y+"$")))||(U&&U.takenSurveys!==e&&(U.takenSurveys.match("##"+Y+"##")||U.takenSurveys.match("##"+Y+"$"))))){continue}var R=c.util.getTotalTimesShown(P,"survey");if(X!==e){if(X<=R){continue}}if(!F._surveyOptions.skipRules&&S!==e&&S){if(!c.ruleExecutor.execute(P,S,F._surveyOptions.ruleData)){continue}}ac=((ac==null||ac>aa)?aa:ac)}V[V.length]=P;O[P]={timespent:aa,showOnExit:M,maxTimesPerUser:X}}c.setTimeout(function(){if(V.length>0){function af(ak,aj,al,ai){totlatTimeElapsed=0;aa=0;if(!al){if(arguments&&typeof arguments[0]==="boolean"&&arguments[0]){aa=aj||0}if(parseInt(F._surveyOptions.delay,10)>=0){aa=parseInt(F._surveyOptions.delay,10)}totlatTimeElapsed=F.totalTimeElapsed+F.minTimespentVal}c.setTimeout(function(){var am=c.util.getTotalTimesShown(ak,"survey");if(F._surveyOptions.isDemoMode||typeof ai==="undefined"||ai>am){x.apply(F,[ak,al])}},((aa-totlatTimeElapsed)<0?0:(aa-totlatTimeElapsed)))}if(!F._surveyOptions.forcedRender){var ad=[];for(var ag=0;ag<V.length;ag++){if(ag>0){ad[ad.length]="&"}ad[ad.length]="surveyIds="+V[ag]}var ae=n.findAllTakenSurveysUrl()+"&"+ad.join("")+(F._surveyOptions.scope?"&scope="+encodeURIComponent(u.stringify(F._surveyOptions.scope)):"");u.loadScript.apply(n.widgetContainer,[ae,function(aj,al,ak){var aq=[],am={};if(typeof we_notToExecuteSurveyIdsMap!="undefined"){if(we_notToExecuteSurveyIdsMap.takenSurveyIds!==e&&we_notToExecuteSurveyIdsMap.takenSurveyIds.length>0){for(var ai=0;ai<we_notToExecuteSurveyIdsMap.takenSurveyIds.length;ai++){var ar=F._surveyOptions.scope[we_notToExecuteSurveyIdsMap.takenSurveyIds[ai]]||F._surveyOptions.scope.all||null;var au=(ar&&ar.scope?ar.scope:"");var ap=(ar&&ar.scopeType?ar.scopeType:"");am[we_notToExecuteSurveyIdsMap.takenSurveyIds[ai]]=true;u.markSurveyAsTaken((we_notToExecuteSurveyIdsMap.takenSurveyIds[ai]+(au&&(ap+"").toUpperCase()!="GLOBAL"?"["+u.escapeScopeChars(au)+"]":"")))}}if(we_notToExecuteSurveyIdsMap.inactiveSurveyIds!==e&&we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length>0){for(var ao=0;ao<we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length;ao++){am[we_notToExecuteSurveyIdsMap.inactiveSurveyIds[ao]]=true}}}for(var at=0;at<al.length;at++){if(!am[al[at]]){aq[aq.length]=al[at]}}if(aq.length>0){F.minTimespentVal=ac;var an=aq[0];af(an,(aj[an]["timespent"]||0),aj[an]["showOnExit"],aj[an]["maxTimesPerUser"])}},[O,V,F.totalTimeElapsed]])}else{F.minTimespentVal=ac;var ah=V[0];af(ah,(O[ah]["timespent"]||0),O[ah]["showOnExit"],O[ah]["maxTimesPerUser"])}}},ac)}},10)}else{if(q.survey&&q.survey.isEnabled&&a.location.protocol=="https:"&&!q.sslEnabled){c.eLog(null,"error","Survey - Widget turned off for SSL encrypted page","Survey - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{n.widgetContainer.removeChild(a.getElementById(n.widgetContainerId+"-survey-content"))}catch(z){}a.$SurveyWidgetInitializer=null;w=[]})},abort:function(){u.abortAllInstances(w)},attachEventListner:function(){var z=this,A=arguments;c.withELog(function(){u.bind.apply(z,A)})}}})());u.extend("IFRAMES",(function(){var v=[];return{create:function(y,A,C){this.remove(y);var D=C||{};var w;try{w=a.createElement('<iframe name="'+y+'">')}catch(B){w=a.createElement("iframe");w.name=y}w.id=y;if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){w.src="javascript:void(0);"}w.frameBorder=D.frameBorder||"0";w.marginHeight=D.marginHeight||"0";w.marginWidth=D.marginWidth||"0";w.allowTransparency=D.allowTransparency||"true";var x=w.style;x.zIndex=(u.getMaxZIndex()+1);x.position="absolute";x.backgroundColor=D.backgroundColor||"transparent";x.bottom=D.bottom||"0px";x.right=D.right||"0px";x.border=D.border||"none";x.overflow=D.overflow||"hidden";x.visibility=D.visibility||"hidden";var z=A||n.widgetContainer;z.appendChild(w);v[y]=w;try{w.contentWindow.name}catch(B){c.eLog(B);w.src='javascript:(function () {document.open();document.domain="'+a.domain+'";document.close();})();'}if(typeof(D.onload)==="function"){if(w.attachEvent){w.attachEvent("onload",D.onload)}else{w.addEventListener("load",D.onload,false)}}return w},get:function(w){return v[w]},resize:function(x,w,y){var z=c.IFRAMES.get(x);z.style.height=w+"px"},remove:function(w){var x=c.IFRAMES.get(w);if(x){if(x.parentNode){x.parentNode.removeChild(x)}}if(d.frames[w]){delete d.frames[w]}delete v[w]},creatCallbackFrame:function(z,x,C,w){var B={};if(typeof(w)==="function"){B.onload=function(){c.withELog(function(){var F=v[z];if(!F.widgetCallBackStatus||F.widgetCallBackStatus===0){F.widgetCallBackStatus=1}else{if(F.widgetCallBackStatus===1){F.contentWindow.location="about:blank";F.widgetCallBackStatus=2}else{if(F.widgetCallBackStatus===2){var G=(new Date()).getTime()+"CB";if(!c.IFRAMES.CB){c.IFRAMES.CB={}}c.IFRAMES.CB[G]=function(H){setTimeout(function(){if(H!==e&&H!==""){try{var J=u.parseJSON(H);if(J!==null){if(J.eventName!==e){w(J.eventName,J.data)}}}catch(I){c.eLog(I)}}F.widgetCallBackStatus=0;c.IFRAMES.remove(z);F=c.IFRAMES.creatCallbackFrame(z,x,C,w)},10)};try{var D=F.contentWindow.name;c.IFRAMES.CB[G](D)}catch(E){c.eLog(E);F.src="javascript:(function () {document.write('<script>var _data=window.name;document.domain=\""+a.domain+'";setTimeout(function(){window.parent.webengage.IFRAMES.CB["'+G+"\"](_data);}, 10);<\/script>')})();"}}}}})}}var A=c.IFRAMES.create(z,x,B);var y=A.style;y.height=0;y.width=0;if(C){A.src=C}return A}}})());u.extend("notification",(function(){var x=[],v=function(E,D,C,y){var F=this;if(E||F._notificationOptions.previewJson!==e){F.notificationEId=E;F.showOnExit=y;F.layout=D||(F._notificationOptions.previewJson&&F._notificationOptions.previewJson.layout?F._notificationOptions.previewJson.layout:"");var A=c.IFRAMES.create(n.widgetContainerId+"-notification-frame",n.widgetContainer);A.style.top="-1000px";A.style.left="-1000px";var G=u.getSessionCookie();var B=null;if(A.contentDocument){B=A.contentDocument}else{if(A.contentWindow){B=A.contentWindow.document}else{if(A.document){B=A.document}}}B.open();var z=(F.layout===""?"notification-base.css":F.layout+"-notification-base.css");B.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="cache-control" content="max-age=0" /><meta http-equiv="cache-control" content="no-cache" /><meta http-equiv="pragma" content="no-cache" /><meta http-equiv="content-type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/webengage/notification/'+z+'?v=183.0" media="screen"/><script type="text/javascript">try{window.parent.window.name}catch(e){document.domain="'+a.domain+'";};<\/script><script type="text/javascript" src="//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js"><\/script></head><body class="notification-body"><script type="text/javascript">window.onload = function () { (function(d){ var _script = d.createElement("script"); _script.type = "text/javascript"; _script.src = "'+n.widgetDomain+n.notificationWidgetScriptUrl+'"; d.body.appendChild(_script); })(document);};<\/script></body></html>');B.close();c.setTimeout(function(){if(F._notificationOptions.previewJson!==e){B.$NotificationWidgetInitializer={currentInstance:F,notificationVersion:C,containerId:n.widgetContainerId,licenseCode:h,appHost:n.baseWebEngageUrl,widgetDomain:n.widgetDomain,previewJson:F._notificationOptions.previewJson}}else{B.$NotificationWidgetInitializer={currentInstance:F,notificationVersion:C,containerId:n.widgetContainerId,licenseCode:h,appHost:n.baseWebEngageUrl,widgetDomain:n.widgetDomain,browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),os:c.BrowserDetect.os(),country:G.country||"",city:G.city||"",region:G.region||"",pageTitle:a.title,ip:G.ip,referrer:a.referrer}}},0)}},w={onLoad:function(y){return this.bind("load",y)},onOpen:function(y){return this.bind("open",y)},onClick:function(y){return this.bind("click",y)},onClose:function(y){return this.bind("close",y)},bind:function(){return u.bind.apply(this,arguments)},unbind:function(){return u.unbind.apply(this,arguments)},executeCallbacks:function(){return u.executeCallbacks.apply(this,arguments)}};return{cbid:1,render:function(y){return c.withELog(function(){return(new function(){c.notification.clear();var E=this;E.cbid=1;x[x.length]=E;E.abort=function(){u.abortInstance(this)};var F={notificationId:f["webengage.notification.notificationId"]||"",skipRules:f["webengage.notification.skipRules"]||false,delay:f["webengage.notification.delay"]||-1,isDemoMode:f["webengage.notification.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.notification.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.notification.ruleData"]||f["webengage.ruleData"]||{},tokens:f["webengage.notification.tokens"]||f["webengage.tokens"]||{},previewJson:f["webengage.notification.previewJson"],forcedRender:f["webengage.notification.forcedRender"]||false,enableCallbacks:f["webengage.notification.enableCallbacks"]||f["webengage.enableCallbacks"]||false};var B={data:"customData",demo:"isDemoMode"};if(y!==e&&!u.isEmptyObject(y)){for(var D in y){var A=B[D];if(A!==e&&A){y[A]=y[D];delete y[D]}}}E._notificationOptions=u.copy(F,(y?y:{}),true);E.enableCallbacks=(typeof E._notificationOptions.enableCallbacks==="boolean"?E._notificationOptions.enableCallbacks:false);u.copy(E,w,true);E.onLoad((E._notificationOptions.onLoad||f["webengage.notification.onLoad"]));E.onClick((E._notificationOptions.onClick||f["webengage.notification.onClick"]));E.onClose((E._notificationOptions.onClose||f["webengage.notification.onClose"]));E.onOpen((E._notificationOptions.onOpen||f["webengage.notification.onOpen"]));u.attachEventListners("notification",E);if(E._notificationOptions.previewJson!==e){u.withWeJquery(function(){v.apply(E)})}else{if(q.notification&&(q.notification.isEnabled||E._notificationOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&q.sslEnabled))&&!q.isNQuotaOver){var z=q.notification.ruleMap;E.totalTimeElapsed=0;var C=c.setInterval(function(){E.totalTimeElapsed+=10;var T=u.getSessionCookie();if(E._notificationOptions.skipRules||(T&&T.country)||E.totalTimeElapsed>5000){if(!T){T=u.setSessionCookie()}clearInterval(C);var Y=u.getWebengageCookie();var G=E._notificationOptions.notificationId;if(G&&z[G]){var ae={};ae[G]=z[G];z=ae}var aa=[];var ad={};for(var ag in z){var H=ag,ab=z[ag].layout,N=(webengage_fs_configurationMap.config.notificationConfig.wl?"W":"N")+z[ag].version,X=z[ag].ruleCode,P=(z[ag].totalTimeOnSite?z[ag].totalTimeOnSite-((new Date()).getTime()-(T.sst||0)):0),af=Math.max(P,z[ag].timespent),Q=z[ag].skipTargetPage,V=z[ag].actionLinks,L=(typeof z[ag].showOnExit==="boolean"?z[ag].showOnExit:false),ac=z[ag].maxTimesPerUser,U=z[ag].mobile;if(!E._notificationOptions.isDemoMode){if(typeof U!=="undefined"&&U&&!c.BrowserDetect.isMobile()){continue}if(!E._notificationOptions.forcedRender&&((T&&T.closedNIds!==e&&T.closedNIds.indexOf("##"+H)>=0)||(Y&&Y.takenNIds!==e&&Y.takenNIds.indexOf("##"+H)>=0))){continue}if(Q&&V instanceof Array&&V.length>0){for(var Z in V){var S=a.createElement("a");S.href=V[Z];V[Z]="^"+u.escapeForRegExp(S.href)+"$";S=null}if(c.ruleExecutor.util.isMatches(u.getClientPageUrl(),V)){continue}}var W=c.util.getTotalTimesShown(H,"notification");if(!E._notificationOptions.isDemoMode&&ac!==e){if(ac<=W){continue}}if(!E._notificationOptions.skipRules&&X!==e&&X){if(!c.ruleExecutor.execute(H,X,E._notificationOptions.ruleData)){continue}}}aa[aa.length]=H;ad[H]={timespent:af,layout:ab,version:N,showOnExit:L,maxTimesPerUser:ac}}function J(aj,ai){var ah=ai.timespent||0;if(parseInt(E._notificationOptions.delay,10)>=0){ah=parseInt(E._notificationOptions.delay,10)}u.withWeJquery(function(){c.setTimeout(function(){var ak=c.util.getTotalTimesShown(aj,"notification");if(E._notificationOptions.isDemoMode||typeof ai.maxTimesPerUser==="undefined"||ai.maxTimesPerUser>ak){v.apply(E,[aj,ai.layout,ai.version,ai.showOnExit])}},(ai.showOnExit?0:((ah-E.totalTimeElapsed)<0?0:(ah-E.totalTimeElapsed))))})}if(aa.length>0){var O=aa[0];if(O!==e&&O){var M=z[O],I=M.startTimestamp,K=M.endTimestamp;if((I!==e&&I)||(K!==e&&K)){function R(){var am=u.getSessionCookie();var al=(new Date()).getTime()+(am.tsD&&!isNaN(am.tsD)?parseInt(am.tsD,10):0);for(var ak=0;ak<aa.length;ak++){var ai=aa[ak];var aj=z[ai],an=aj.startTimestamp,ah=aj.endTimestamp;if((ah!==e)&&(ah<al)){continue}if((an!==e)&&(al<an)){continue}J(ai,ad[ai]);break}}if(T.tsD&&!isNaN(T.tsD)){R()}else{c.GEO.load(function(){R()})}}else{J(O,ad[O])}}}}},10)}else{if(q.notification&&q.notification.isEnabled&&a.location.protocol=="https:"&&!q.sslEnabled){c.eLog(null,"error","Notification - Widget turned off for SSL encrypted page","Notification - Widget turned off for SSL encrypted page")}}}})})},getNotificationFrame:function(){return a.getElementById(n.widgetContainerId+"-notification-frame")},resize:function(A){var z=a.getElementById(n.widgetContainerId+"-notification-frame");z.height=A.height||z.contentWindow.document.body.scrollHeight;z.width=A.width||z.contentWindow.document.body.scrollWidth;var y=z.style;y.visibility="visible";y.height=parseInt(A.height||z.contentWindow.document.body.scrollHeight)+"px";y.width=parseInt(A.width||z.contentWindow.document.body.scrollWidth)+"px";y.top="auto";y.bottom="0px";y.left="auto";if("right"==A.launchType){y.right="0px"}else{y.left="0px"}},clear:function(){var y=this;c.withELog(function(){try{c.IFRAMES.remove(n.widgetContainerId+"-notification-frame")}catch(z){}x=[]})},abort:function(){u.abortAllInstances(x)},attachEventListner:function(){var y=this,z=arguments;c.withELog(function(){u.bind.apply(y,z)})}}})());u.extend("",{abort:function(){c.withELog(function(){c.feedback.abort();c.survey.abort();c.notification.abort()})}});u.extend("",{init:function(v){var w=function(x){if(v[x]!==e&&v[x]){f["webengage."+x]=v[x]}};w("licenseCode");w("language");w("isDemoMode");w("delay");if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){u.onDocReady(g)}return c}});u.extend("",{onReady:function(v){if(v!==e&&typeof v==="function"){f["webengage.oldOnReady"]=v}}});u.extend("",{render:function(v){if(v){if(v.showFeedbackByDefault!==e&&!v.showFeedbackByDefault){f["webengage.feedback.defaultRender"]=false}if(v.showSurveyByDefault!==e&&!v.showSurveyByDefault){f["webengage.survey.defaultRender"]=false}if(v.showNotificationByDefault!==e&&!v.showNotificationByDefault){f["webengage.notification.defaultRender"]=false}}o()}});var g=function(){h=f["webengage.licenseCode"];var x=a.createElement("webengagedata");a.body.insertBefore(x,null);n.weDataContainer=x;try{var B=a.createElement("style");var y=a.createTextNode("#webklipper-publisher-widget-container, #webklipper-publisher-widget-container * {overflow:visible; -webkit-box-sizing: content-box; -moz-box-sizing: content-box;  box-sizing: content-box;}#webklipper-publisher-widget-container-survey-content, #webklipper-publisher-widget-container-survey-content #webklipper-publisher-widget-container-survey-frame {max-height: 450px; max-width: 100%}");B.type="text/css";if(B.styleSheet){B.styleSheet.cssText=y.nodeValue}else{B.appendChild(y)}n.weDataContainer.appendChild(B)}catch(A){}var v=a.createElement("div");v.setAttribute("id",n.widgetContainerId);n.weDataContainer.appendChild(v);n.widgetContainer=v;var w=u.getWebengageCookie();if(!w){w=u.setWebengageCookie()}else{if(!w.luid){w=u.setWebengageCookie(u.getWebengageCookie())}}var z=u.getSessionCookie();if(!z){z=u.setSessionCookie()}else{if(!z.suid){z=u.setSessionCookie(u.getSessionCookie())}}if(typeof w.isGzip==="undefined"||!w.isGzip){c.util.loadScript.apply(n.widgetContainer,["//z.webengage.com/gz.js",function(){w.isGzip=(typeof f.isGzip!="undefined"&&f.isGzip?true:false);u.setWebengageCookie(w);p(w.isGzip,w.luid,z.suid)}])}else{p(w.isGzip,w.luid,z.suid)}};var p=function(w,x,v){d.webengage.setTimeout(function(){var z=(w?"webengage-zfiles":"webengage-files");var y="//s3.amazonaws.com/"+z+"/webengage/"+h+"/v3.js?r="+Math.floor((new Date()).getTime()/60000)+"&u="+x+"|"+v;u.loadScript.apply(n.widgetContainer,[y,function(){var A=c.setInterval(function(){if(typeof webengage_fs_configurationMap!=="undefined"&&webengage_fs_configurationMap.config){clearInterval(A);if(((webengage_fs_configurationMap.sites!==e&&webengage_fs_configurationMap.sites)||(webengage_fs_configurationMap.domain!==e&&webengage_fs_configurationMap.domain))&&!f["webengage.isDemoMode"]){var F=false;var B=u.getClientPageHost(),D;if(B.match(/\:[\d]*$/)){D=B.substring(B.indexOf(":")+1,B.length);B=B.substring(0,B.indexOf(":"))}var L=[];var G=[];if(webengage_fs_configurationMap.sites===e||!webengage_fs_configurationMap.sites){webengage_fs_configurationMap.sites={};webengage_fs_configurationMap.sites[webengage_fs_configurationMap.domain]="DOMAIN"}for(var J in webengage_fs_configurationMap.sites){var H=J,K;if(webengage_fs_configurationMap.sites[J]=="DOMAIN"){L[L.length]=H;if(H.match(/^www\./i)){H=H.substring(4,H.length)}if(H.match(/\:[\d]*$/)){K=H.substring(H.indexOf(":")+1,H.length);H=H.substring(0,H.indexOf(":"))}if((B.match(new RegExp(u.escapeForRegExp(H)+"$","gi"))&&(!K||K==D))){F=true;break}}else{if(webengage_fs_configurationMap.sites[J]=="REGEXP"){var C=H;G[G.length]=H;if((u.getClientPageUrl().match(C))){F=true;break}}}}if(!F){var E='The <a style="color: #00f;" href="http://webengage.com/" target="_blank">WebEngage (Survey, Feedback &amp; Notification)</a> widget on this page is incorrectly configured. It is meant for use only on ';if(L.length>0){E+="<b>"+L.join(", ")+"</b>"}if(G.length>0){if(L.length>0){E+=(" and ")}E+=("pages with URLs that matches following regular expression(s) <b>"+G.join(", ")+"</b>")}c.logger.error(E+".");return}}n.publisherTimeZoneOffset=webengage_fs_configurationMap.tzo;u.copy(q,(function(M){return{configurationMap:M?M:{}}})(webengage_fs_configurationMap));if((typeof(webengage_fs_configurationMap.config.enableSurvey)=="boolean"&&webengage_fs_configurationMap.config.enableSurvey&&webengage_fs_configurationMap.surveyRuleList!==e&&webengage_fs_configurationMap.surveyRuleList instanceof Array&&webengage_fs_configurationMap.surveyRuleList.length>0)||(typeof(webengage_fs_configurationMap.config.enableNotification)=="boolean"&&webengage_fs_configurationMap.config.enableNotification&&webengage_fs_configurationMap.notificationRuleList!==e&&webengage_fs_configurationMap.notificationRuleList instanceof Array&&webengage_fs_configurationMap.notificationRuleList.length>0)){var I=u.getSessionCookie();if(!I||!I.country||I.country===e){if((a.location.protocol=="http:"||(a.location.protocol=="https:"&&webengage_fs_configurationMap.sslEnabled))){c.GEO.load();s()}}else{u.updateSessionCookieOnWidgetLoad(webengage_fs_configurationMap.domain);s()}}else{s()}}},1)},null,function(){}])},(f["webengage.delay"]&&parseInt(f["webengage.delay"])>0?parseInt(f["webengage.delay"]):0))},s=function(){(function(w){u.extend("widgetConfiguration",{});if(w&&w.config){u.copy(q,{feedback:{isEnabled:(typeof w.config.enableFeedback=="boolean"&&w.config.enableFeedback),config:w.config.feedbackConfig?w.config.feedbackConfig:{}}},true);u.copy(q,{survey:{isEnabled:(typeof w.config.enableSurvey=="boolean"&&w.config.enableSurvey),config:w.config.surveyConfig?w.config.surveyConfig:{},ruleMap:(function(){var z={};if(w.surveyRuleList){var x=w.surveyRuleList;for(var y=0;y<x.length;y++){z[x[y].surveyEncId]=x[y]}}return z})()}},true);u.copy(q,{notification:{isEnabled:(typeof w.config.enableNotification=="boolean"&&w.config.enableNotification),ruleMap:(function(){var y={};if(w.notificationRuleList){var z=w.notificationRuleList;for(var x=0;x<z.length;x++){y[z[x].notificationEncId]={ruleCode:z[x].ruleCode,timespent:parseInt(z[x].timeSpent)!="NaN"?parseInt(z[x].timeSpent):0,totalTimeOnSite:parseInt(z[x].totalTimeOnSite)!="NaN"?parseInt(z[x].totalTimeOnSite):0,actionLinks:z[x].actionLinks||[],skipTargetPage:typeof(z[x].skipTargetPage)=="boolean"?z[x].skipTargetPage:false,maxTimesPerUser:z[x].maxTimesPerUser,startTimestamp:z[x].startTimestamp,endTimestamp:z[x].endTimestamp,layout:z[x].layout,version:((typeof z[x].v!="undefined")?z[x].v:0),showOnExit:z[x].showOnExit,mobile:z[x].mobile}}}return y})()}},true);u.copy(q,{sslEnabled:(w.sslEnabled?w.sslEnabled:false),isSRQuotaOver:(w.isSRQ?w.isSRQ:false),isNQuotaOver:(w.isNQ?w.isNQ:false),isFQuotaOver:(w.isFQ?w.isFQ:false)},true);u.uwats(w.lastWidgetCheckDate)}function v(){if(f["webengage.oldOnReady"]!==e&&typeof f["webengage.oldOnReady"]==="function"){f["webengage.widgetVersion"]="3.0";f["webengage.oldOnReady"].apply(this)}else{if(f["webengage.onReady"]!==e&&typeof f["webengage.onReady"]==="function"){f["webengage.onReady"].apply(this);o()}else{o()}}if(c.BrowserDetect.ie()){d.attachEvent("onbeforeunload",function(){c.withELog(function(){u.setWebengageCookie(u.getWebengageCookie());u.updateSessionCookie(u.getSessionCookie())})})}}if(w&&w.GAEnabled){if(typeof _gaq==="undefined"){c.eLog(f["webengage.licenseCode"],"error","_gaq undefined - not loading ga-callback-helper","_gaq undefined");v()}else{u.loadScript.apply(n.widgetContainer,[n.gaCallbacksScriptUrl,function(){v()}])}}else{v()}})(q.configurationMap)},o=function(){var v=function(x){var w=typeof f["webengage."+x+".defaultRender"]==="boolean"?f["webengage."+x+".defaultRender"]:f["webengage.defaultRender"];return(typeof w==="boolean"?w:true)};if(v("feedback")){setTimeout(function(){c.feedback.render()},1)}if(v("survey")){setTimeout(function(){c.survey.render()},1)}if(v("notification")){setTimeout(function(){c.notification.render()},1)}};if(d.webengageWidgetInit!==e&&typeof d.webengageWidgetInit==="function"){d.webengageWidgetInit()}else{var m=a.getElementsByTagName("webengage")[0];if(m&&m.attributes){var k=m.attributes;f["webengage.licenseCode"]=k.license.value;f["webengage.language"]=(k.language?k.language.value:"");if(k.feedbackButtonAlignment){f["webengage.feedback.alignment"]=k.feedbackButtonAlignment.value}if(k.feedbackExternalLinkId){f["webengage.feedback.externalLinkId"]=k.feedbackExternalLinkId.value}}if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){u.onDocReady(g)}}};if(navigator.appName=="Microsoft Internet Explorer"){if(a.body&&(a.body.readyState=="loaded"||a.body.readyState=="complete")){b()}else{if(d.addEventListener){d.addEventListener("load",function(){b()},false)}else{if(d.attachEvent){d.attachEvent("onload",function(){b()})}}}}else{b()}c.getUser=function(){var g=c.util.getSessionCookie();return{pageUrl:d.location.href,pageTitle:a.title,referrer:(a.referrer||""),browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),platform:c.BrowserDetect.os(),ip:(g?g.ip:""),city:(g?g.city:""),country:(g?g.country:"")}}})(window,document,_weq,webengage)},10);